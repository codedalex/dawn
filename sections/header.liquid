{% comment %}sections/header.liquid{% endcomment %}

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "header",
      "content": "Layout Settings"
    },
    {
      "type": "select",
      "id": "header_style",
      "label": "Header Style",
      "options": [
        {
          "value": "default",
          "label": "Default"
        },
        {
          "value": "centered",
          "label": "Centered"
        },
        {
          "value": "minimal",
          "label": "Minimal"
        },
        {
          "value": "expanded",
          "label": "Expanded"
        },
        {
          "value": "compact",
          "label": "Compact"
        },
        {
          "value": "split",
          "label": "Split"
        }
      ],
      "default": "default"
    },
    {
      "type": "checkbox",
      "id": "sticky_header",
      "label": "Sticky Header",
      "default": true
    },
    {
      "type": "header",
      "content": "Navigation Settings"
    },
    {
      "type": "select",
      "id": "nav_position",
      "label": "Navigation Position",
      "options": [
        {"value": "inline", "label": "Inline"},
        {"value": "below", "label": "Below Header"}
      ],
      "default": "inline"
    },
    {
      "type": "select",
      "id": "nav_alignment",
      "label": "Menu Alignment",
      "options": [
        {"value": "left", "label": "Left"},
        {"value": "center", "label": "Center"},
        {"value": "right", "label": "Right"}
      ],
      "default": "center"
    },
    {
      "type": "header",
      "content": "Mobile Menu Settings"
    },
    {
      "type": "checkbox",
      "id": "show_mobile_menu",
      "label": "Show mobile menu",
      "default": true
    },
    {
      "type": "select",
      "id": "mobile_menu_position",
      "label": "Mobile menu position",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    }
  ],
  "blocks": [
    {
      "type": "logo",
      "name": "Logo",
      "settings": [
        {
          "type": "checkbox",
          "id": "show_logo",
          "label": "Show logo",
          "default": true
        },
        {
          "type": "header",
          "content": "Logo Settings"
        },
        {
          "type": "image_picker",
          "id": "logo",
          "label": "Logo"
        },
        {
          "type": "image_picker", 
          "id": "logo_mobile",
          "label": "Mobile Logo",
          "info": "Optional different logo for mobile devices"
        },
        {
          "type": "range",
          "id": "logo_width",
          "min": 50,
          "max": 350,
          "step": 10,
          "unit": "px",
          "label": "Logo width",
          "default": 140
        },
        {
          "type": "range",
          "id": "logo_width_mobile",
          "min": 50,
          "max": 200,
          "step": 10,
          "unit": "px",
          "label": "Mobile logo width",
          "default": 100
        },
        {
          "type": "range",
          "id": "logo_height",
          "min": 20,
          "max": 200,
          "step": 5,
          "unit": "px",
          "label": "Logo height",
          "default": 50,
          "info": "Set to 0 to maintain aspect ratio"
        },
        {
          "type": "select",
          "id": "logo_alignment",
          "label": "Logo alignment",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            },
            {
              "value": "right", 
              "label": "Right"
            }
          ],
          "default": "left"
        },
        {
          "type": "checkbox",
          "id": "home_page_only",
          "label": "Link to home page only",
          "default": false
        },
        {
          "type": "range",
          "id": "height_constraint",
          "min": 30,
          "max": 200, 
          "step": 10,
          "unit": "px",
          "label": "Container height",
          "default": 50,
          "info": "Set a fixed height for the logo container"
        }
      ]
    },
    {
      "type": "menu",
      "name": "Menu Item",
      "settings": [
        {
          "type": "select",
          "id": "menu_type",
          "label": "Menu Type",
          "options": [
            {"value": "simple", "label": "Simple"},
            {"value": "mega", "label": "Mega"},
            {"value": "dropdown", "label": "Dropdown"},
            {"value": "featured", "label": "Featured"}
          ],
          "default": "simple"
        },
        {
          "type": "link_list",
          "id": "menu",
          "label": "Menu"
        },
        {
          "type": "select",
          "id": "mega_width",
          "label": "Mega Menu Width",
          "options": [
            {"value": "container", "label": "Container"},
            {"value": "full", "label": "Full Width"}
          ],
          "default": "container"
        },
        {
          "type": "image_picker",
          "id": "featured_image",
          "label": "Featured Image"
        }
      ]
    },
    {
      "type": "icons",
      "name": "Header Icons",
      "settings": [
        {
          "type": "header",
          "content": "Icon Display"
        },
        {
          "type": "checkbox",
          "id": "show_icons",
          "label": "Show header icons",
          "default": true,
          "info": "Controls visibility of all header icons"
        },
        {
          "type": "header",
          "content": "Individual Icons"
        },
        {
          "type": "checkbox",
          "id": "show_search",
          "label": "Show search icon",
          "default": true
        },
        {
          "type": "checkbox", 
          "id": "show_account",
          "label": "Show account icon",
          "default": true,
          "info": "Requires customer accounts to be enabled"
        },
        {
          "type": "checkbox",
          "id": "show_wishlist",
          "label": "Show wishlist icon",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_cart",
          "label": "Show cart icon",
          "default": true
        },
        {
          "type": "header",
          "content": "Icon Style Settings"
        },
        {
          "type": "select",
          "id": "icon_size",
          "label": "Icon size",
          "options": [
            {
              "value": "small",
              "label": "Small"
            },
            {
              "value": "medium",
              "label": "Medium"
            },
            {
              "value": "large",
              "label": "Large"
            }
          ],
          "default": "medium"
        },
        {
          "type": "select",
          "id": "icon_style",
          "label": "Icon style",
          "options": [
            {
              "value": "default",
              "label": "Default"
            },
            {
              "value": "filled",
              "label": "Filled"
            },
            {
              "value": "outline",
              "label": "Outline"
            }
          ],
          "default": "default"
        },
        {
          "type": "header",
          "content": "Counter Badge Settings"
        },
        {
          "type": "checkbox",
          "id": "show_count",
          "label": "Show count badges",
          "default": true,
          "info": "Shows item count for cart and wishlist"
        },
        {
          "type": "select",
          "id": "count_style",
          "label": "Counter badge style",
          "options": [
            {
              "value": "circle",
              "label": "Circle"
            },
            {
              "value": "pill",
              "label": "Pill"
            },
            {
              "value": "square",
              "label": "Square"
            }
          ],
          "default": "circle"
        },
        {
          "type": "color",
          "id": "count_background",
          "label": "Counter badge background",
          "default": "#000000"
        },
        {
          "type": "color", 
          "id": "count_text_color",
          "label": "Counter badge text color",
          "default": "#FFFFFF"
        }
      ]
    }
  ]
}
{% endschema %}

<header id="header" class="header-{{ section.settings.header_style }} {% if section.settings.sticky_header %}is-sticky{% endif %}" data-section-id="{{ section.id }}">
  <div class="px_15 lg-px_40 header-container">
    <div class="row wrapper-header align-items-center header-row">
      {%- if section.settings.show_mobile_menu -%}
        <div class="col-md-4 col-3 tf-lg-hidden mobile-menu-toggle">
          <a href="#mobileMenu" 
            class="mobile-menu-toggle d-lg-none" 
            data-bs-toggle="offcanvas" 
            aria-controls="mobileMenu"
            aria-expanded="false"
            aria-label="Toggle mobile menu">
             <svg xmlns="http://www.w3.org/2000/svg" width="24" height="16" viewBox="0 0 24 16" fill="none">
                 <path d="M2.00056 2.28571H16.8577C17.1608 2.28571 17.4515 2.16531 17.6658 1.95098C17.8802 1.73665 18.0006 1.44596 18.0006 1.14286C18.0006 0.839753 17.8802 0.549063 17.6658 0.334735C17.4515 0.120408 17.1608 0 16.8577 0H2.00056C1.69745 0 1.40676 0.120408 1.19244 0.334735C0.978109 0.549063 0.857702 0.839753 0.857702 1.14286C0.857702 1.44596 0.978109 1.73665 1.19244 1.95098C1.40676 2.16531 1.69745 2.28571 2.00056 2.28571ZM0.857702 8C0.857702 7.6969 0.978109 7.40621 1.19244 7.19188C1.40676 6.97755 1.69745 6.85714 2.00056 6.85714H22.572C22.8751 6.85714 23.1658 6.97755 23.3801 7.19188C23.5944 7.40621 23.7148 7.6969 23.7148 8C23.7148 8.30311 23.5944 8.59379 23.3801 8.80812C23.1658 9.02245 22.8751 9.14286 22.572 9.14286H2.00056C1.69745 9.14286 1.40676 9.02245 1.19244 8.80812C0.978109 8.59379 0.857702 8.30311 0.857702 8ZM0.857702 14.8571C0.857702 14.554 0.978109 14.2633 1.19244 14.049C1.40676 13.8347 1.69745 13.7143 2.00056 13.7143H12.2863C12.5894 13.7143 12.8801 13.8347 13.0944 14.049C13.3087 14.2633 13.4291 14.554 13.4291 14.8571C13.4291 15.1602 13.3087 15.4509 13.0944 15.6653C12.8801 15.8796 12.5894 16 12.2863 16H2.00056C1.69745 16 1.40676 15.8796 1.19244 15.6653C0.978109 15.4509 0.857702 15.1602 0.857702 14.8571Z" fill="currentColor"></path>
             </svg>
          </a>
          {% render 'mobile-menu-toggle' %}
        </div>
      {%- endif -%}

      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'logo' %}
            {% render 'header-logo', block: block %}
          
          {% when 'menu' %}
            {% render 'header-navigation', 
              block: block,
              nav_position: section.settings.nav_position,
              nav_alignment: section.settings.nav_alignment
            %}

          {% when 'icons' %}
            {% render 'header-icons', block: block %}
        {% endcase %}
      {% endfor %}
    </div>
  </div>
</header>


{% javascript %}
  class Header {
    constructor() {
      this.header = document.getElementById('header');
      this.lastScrollTop = 0;
      
      if (this.header) {
        this.init();
      }
    }

    init() {
      if (this.header.classList.contains('is-sticky')) {
        window.addEventListener('scroll', this.handleScroll.bind(this));
      }
    }

    handleScroll() {
      const st = window.pageYOffset;
      
      if (st > this.lastScrollTop) {
        // Scrolling down
        this.header.style.transform = 'translateY(-100%)';
      } else {
        // Scrolling up
        this.header.style.transform = 'translateY(0)';
      }
      
      this.lastScrollTop = st;
    }
  }

  // Initialize header
  new Header();
{% endjavascript %}